*{margin:0;padding:0;box-sizing:border-box}.app{width:100vw;height:100vh;background:#0a0a0a;color:#fff;display:flex;flex-direction:column}.header{background:#1a1a2e;padding:12px 16px;border-bottom:2px solid #2a2a4e;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}.header h1{font-size:18px;font-weight:700}.stats{display:flex;gap:12px;font-size:12px;color:#888;flex-wrap:wrap}.stats span{display:flex;align-items:center;gap:6px}.canvas-container{flex:1;display:flex;justify-content:center;align-items:center;overflow:hidden;padding:8px}canvas{border:2px solid #2a2a4e;border-radius:8px;cursor:pointer;box-shadow:0 4px 20px #00000080;max-width:100%;max-height:100%;touch-action:none}.chat-input-container{position:fixed;bottom:20px;left:50%;transform:translate(-50%);width:300px;z-index:1000;display:flex;gap:8px;background:#1a1a2e;padding:8px;border-radius:8px;border:2px solid #2a2a4e;box-shadow:0 4px 20px #00000080}.chat-input{flex:1;padding:8px 12px;border:none;border-radius:4px;background:#2a2a4e;color:#fff;font-size:14px;outline:none}.chat-input::placeholder{color:#888}.chat-input:focus{border:1px solid #4CAF50}.chat-send-button{padding:8px 16px;border:none;border-radius:4px;background:#4caf50;color:#fff;font-size:14px;cursor:pointer;transition:background .2s}.chat-send-button:hover{background:#45a049}.chat-send-button:active{background:#3d8b40}.controls{background:#1a1a2e;padding:8px 16px;border-top:2px solid #2a2a4e;text-align:center;font-size:12px;color:#888}.interaction-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:transparent;z-index:2000}.interaction-menu{position:fixed;background:#000000d9;border:1px solid #4a4a4a;border-radius:8px;box-shadow:0 4px 20px #00000080;z-index:2001;min-width:150px;overflow:hidden}.interaction-menu-header{padding:10px 12px;background:#ffffff0d;border-bottom:1px solid #4a4a4a;font-weight:700;font-size:13px;color:#fff}.interaction-menu-items{display:flex;flex-direction:column}.interaction-menu-button{width:100%;padding:10px 12px;border:none;background:transparent;color:#fff;font-size:13px;text-align:left;cursor:pointer;transition:background .2s;display:flex;align-items:center;gap:8px}.interaction-menu-button:hover{background:#4a90e24d}.interaction-menu-button:active{background:#4a90e280}.chat-history-sidebar{position:fixed;right:0;top:0;bottom:0;width:350px;background:#000000d9;border-left:2px solid #2a2a4e;box-shadow:-4px 0 20px #000c;z-index:3000;display:flex;flex-direction:column;animation:slideInRight .3s ease-out}@keyframes slideInRight{0%{transform:translate(100%)}to{transform:translate(0)}}.chat-history-header{background:#ffffff0d;border-bottom:2px solid #2a2a4e;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}.chat-history-header h3{font-size:14px;font-weight:700;color:#4caf50}.chat-history-close{width:32px;height:32px;border:none;border-radius:4px;background:#ffffff1a;color:#fff;font-size:18px;cursor:pointer;transition:background .2s;display:flex;align-items:center;justify-content:center}.chat-history-close:hover{background:#fff3}.chat-history-close:active{background:#ffffff4d}.chat-history-list{flex:1;overflow-y:auto;padding:12px;display:flex;flex-direction:column;gap:8px}.chat-history-list::-webkit-scrollbar{width:6px}.chat-history-list::-webkit-scrollbar-track{background:#ffffff0d}.chat-history-list::-webkit-scrollbar-thumb{background:#fff3;border-radius:3px}.chat-history-list::-webkit-scrollbar-thumb:hover{background:#ffffff4d}.chat-history-empty{text-align:center;color:#888;font-size:12px;padding:20px}.chat-history-item{background:#ffffff14;border:1px solid rgba(255,255,255,.1);border-radius:6px;padding:8px 10px;font-size:12px}.chat-history-meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;flex-wrap:wrap;gap:4px}.chat-history-name{font-weight:700;color:#4caf50}.chat-history-time{color:#888;font-size:10px}.chat-history-message{color:#fff;line-height:1.4}.affinity-display{position:fixed;background:#000000d9;border:1px solid #FF6B6B;border-radius:8px;box-shadow:0 4px 20px #000c;z-index:2500;padding:12px;min-width:200px;animation:fadeIn .3s ease-out}@keyframes fadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.affinity-display-name{font-size:13px;font-weight:700;color:#ff6b6b;margin-bottom:6px}.affinity-display-value{font-size:12px;color:#fff}.affinity-display-heart{font-size:28px;text-align:center;margin:4px 0}.toast{position:fixed;top:60px;left:50%;transform:translate(-50%);background:#000000e6;border:1px solid #4a4a4a;border-radius:8px;box-shadow:0 4px 20px #000c;z-index:3000;padding:12px 16px;font-size:13px;color:#fff;animation:slideDown .3s ease-out;max-width:80%;text-align:center}.toast-success{border-color:#4caf50;background:#4caf50e6}.toast-warning{border-color:#ff6b6b;background:#ff6b6be6}.toast-info{border-color:#4a90e2;background:#4a90e2e6}@keyframes slideDown{0%{opacity:0;transform:translate(-50%) translateY(-20px)}to{opacity:1;transform:translate(-50%) translateY(0)}}@media (max-width: 768px){.header{padding:8px 12px}.header h1{font-size:16px}.stats{gap:8px;font-size:10px}.canvas-container{padding:4px}.controls{padding:6px 12px;font-size:11px}.chat-history-sidebar{width:300px}.chat-history-header h3{font-size:12px}.chat-history-item{font-size:11px}.affinity-display{min-width:180px;padding:10px}}@media (max-width: 480px){.header h1{font-size:14px}.stats{gap:6px;font-size:9px}.chat-input-container{width:calc(100% - 32px);margin-left:16px;transform:none}.chat-history-sidebar{width:100%;max-width:280px}.controls{font-size:10px}}.room-controls{display:flex;gap:8px}.room-button{padding:6px 12px;background:#4caf50;color:#fff;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s}.room-button:hover{background:#45a049}.room-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;z-index:2000}.room-menu{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#1a1a2e;border:2px solid #2a2a4e;border-radius:8px;padding:16px;width:320px;max-height:80vh;z-index:2001;display:flex;flex-direction:column;box-shadow:0 4px 20px #00000080}.room-menu-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid #2a2a4e}.room-menu-header h3{font-size:16px;font-weight:700}.room-menu-close{background:none;border:none;color:#888;font-size:18px;cursor:pointer;padding:4px}.room-menu-close:hover{color:#fff}.room-list{flex:1;overflow-y:auto;margin-bottom:12px;max-height:300px}.room-item{width:100%;padding:10px 12px;background:#2a2a4e;color:#fff;border:none;border-radius:4px;font-size:13px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;margin-bottom:6px;transition:background .2s}.room-item:hover{background:#3a3a6e}.room-item-active{background:#4caf50!important;font-weight:700}.room-name{flex:1;text-align:left}.room-characters{font-size:11px;color:#888}.room-create{display:flex;gap:8px;padding-top:8px;border-top:1px solid #2a2a4e}.room-input{flex:1;padding:8px 12px;border:none;border-radius:4px;background:#2a2a4e;color:#fff;font-size:13px;outline:none}.room-input::placeholder{color:#888}.room-input:focus{border:1px solid #4CAF50}.room-create-button{padding:8px 12px;background:#4caf50;color:#fff;border:none;border-radius:4px;font-size:12px;cursor:pointer;transition:background .2s}.room-create-button:hover{background:#45a049}.room-list::-webkit-scrollbar{width:6px}.room-list::-webkit-scrollbar-track{background:#1a1a2e}.room-list::-webkit-scrollbar-thumb{background:#2a2a4e;border-radius:3px}.room-list::-webkit-scrollbar-thumb:hover{background:#3a3a6e}@media (pointer: coarse) or (hover: none){.chat-send-button,.interaction-menu-button,.room-button,.room-item,.room-create-button,.room-menu-close,.chat-history-close{min-height:44px;min-width:44px;padding:10px 16px}.chat-input{min-height:44px;font-size:16px}.affinity-display{min-height:44px;min-width:44px;padding:14px 16px}canvas{touch-action:none}}@media (max-width: 768px) and (pointer: coarse){.affinity-display-name{font-size:14px}.affinity-display-value{font-size:13px}}
